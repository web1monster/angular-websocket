{"version":3,"sources":["src/angular-websocket.js"],"names":["$WebSocketProvider","$rootScope","$q","$timeout","$websocketBackend","$WebSocket","url","protocols","options","isObject","isArray","undefined","this","ssl","test","scope","rootScopeFailover","useApplyAsync","_reconnectAttempts","reconnectAttempts","initialTimeout","maxTimeout","sendQueue","onOpenCallbacks","onMessageCallbacks","onErrorCallbacks","onCloseCallbacks","objectFreeze","_readyStateConstants","_connect","_setInternalState","prototype","CONNECTING","OPEN","CLOSING","CLOSED","RECONNECT_ABORTED","_reconnectableStatusCodes","safeDigest","autoApply","$$phase","$digest","bindToScope","self","$on","force","socket","readyState","create","onmessage","angular","bind","_onMessageHandler","onopen","_onOpenHandler","onerror","_onErrorHandler","onclose","_onCloseHandler","fireQueue","length","data","shift","send","isString","message","JSON","stringify","deferred","resolve","notifyOpenCallbacks","event","i","call","notifyCloseCallbacks","notifyErrorCallbacks","onOpen","cb","push","onClose","onError","onMessage","callback","isFunction","Error","isDefined","filter","RegExp","fn","pattern","indexOf","code","reconnect","applyAsyncOrDigest","args","arraySlice","arguments","$applyAsync","apply","currentCallback","exec","close","bufferedAmount","cancelableify","promise","cancel","then","newPromise","reason","splice","reject","defer","_getBackoffDelay","attempt","R","Math","random","T","F","N","M","floor","min","pow","state","objectDefineProperty","_internalConnectionState","forEach","pending","get","set","$WebSocketBackendProvider","$window","$log","Socket","ws","match","exports","require","Client","client","e","WebSocket","MozWebSocket","createWebSocketBackend","warn","noop","Object","freeze","defineProperty","Array","slice","elt","len","from","Number","ceil","module","factory","service","define"],"mappings":"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"}