{"version":3,"sources":["src/angular-websocket.js"],"names":["$WebSocketProvider","$rootScope","$q","$timeout","$websocketBackend","safeDigest","autoApply","$$phase","$apply","$WebSocket","url","options","protocols","isString","isArray","this","ssl","test","_reconnectAttempts","initialTimeout","maxTimeout","sendQueue","onOpenCallbacks","onMessageCallbacks","onErrorCallbacks","onCloseCallbacks","objectFreeze","_readyStateConstants","_connect","_setInternalState","prototype","CONNECTING","OPEN","CLOSING","CLOSED","RECONNECT_ABORTED","_reconnectableStatusCodes","close","force","socket","bufferedAmount","readyState","createWebSocketBackend","onopen","_onOpenHandler","bind","onmessage","_onMessageHandler","onerror","_onErrorHandler","onclose","_onCloseHandler","fireQueue","length","data","shift","send","message","JSON","stringify","deferred","resolve","notifyOpenCallbacks","i","call","notifyCloseCallbacks","event","notifyErrorCallbacks","onOpen","cb","push","onClose","onError","onMessage","callback","isFunction","Error","isDefined","filter","RegExp","fn","pattern","undefined","indexOf","code","reconnect","currentCallback","exec","cancelableify","promise","cancel","then","newPromise","apply","arguments","reason","splice","reject","defer","angular","_getBackoffDelay","attempt","R","Math","random","T","F","N","M","floor","min","pow","state","objectDefineProperty","_internalConnectionState","forEach","pending","get","set","$WebSocketBackend","$window","Socket","ws","match","exports","require","Client","client","e","WebSocket","MozWebSocket","noop","Object","freeze","defineProperty","arraySlice","Array","slice","elt","len","from","Number","ceil","Function","oThis","TypeError","aArgs","fToBind","fNOP","fBound","concat","$inject","module","factory","service"],"mappings":"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"}