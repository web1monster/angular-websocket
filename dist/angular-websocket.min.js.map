{"version":3,"sources":["src/angular-websocket.js"],"names":["$WebSocketProvider","$rootScope","$q","$timeout","$websocketBackend","$WebSocket","url","protocols","options","isObject","isArray","undefined","this","ssl","test","scope","rootScopeFailover","_reconnectAttempts","reconnectAttempts","initialTimeout","maxTimeout","sendQueue","onOpenCallbacks","onMessageCallbacks","onErrorCallbacks","onCloseCallbacks","objectFreeze","_readyStateConstants","_connect","_setInternalState","prototype","CONNECTING","OPEN","CLOSING","CLOSED","RECONNECT_ABORTED","_reconnectableStatusCodes","safeDigest","autoApply","$$phase","$digest","bindToScope","$on","force","socket","readyState","create","onopen","_onOpenHandler","bind","onmessage","_onMessageHandler","onerror","_onErrorHandler","onclose","_onCloseHandler","fireQueue","length","data","shift","send","isString","message","JSON","stringify","deferred","resolve","notifyOpenCallbacks","i","call","notifyCloseCallbacks","event","notifyErrorCallbacks","onOpen","cb","push","onClose","onError","onMessage","callback","isFunction","Error","isDefined","filter","RegExp","fn","pattern","indexOf","code","reconnect","currentCallback","socketInstance","exec","close","bufferedAmount","cancelableify","promise","cancel","then","newPromise","apply","arguments","reason","splice","reject","defer","_getBackoffDelay","attempt","R","Math","random","T","F","N","M","floor","min","pow","state","objectDefineProperty","_internalConnectionState","angular","forEach","pending","get","set","$WebSocketBackendProvider","$window","$log","Socket","ws","match","exports","require","Client","client","e","WebSocket","MozWebSocket","createWebSocketBackend","warn","noop","Object","freeze","defineProperty","arraySlice","Array","slice","elt","len","from","Number","ceil","Function","oThis","TypeError","aArgs","fToBind","FNOP","fBound","concat","module","factory","service"],"mappings":"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"}