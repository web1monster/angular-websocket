{"version":3,"sources":["src/angular-websocket.js"],"names":["$WebSocketProvider","$rootScope","$q","$timeout","$websocketBackend","$WebSocket","url","protocols","options","isObject","isArray","undefined","this","ssl","test","scope","rootScopeFailover","useApplyAsync","_reconnectAttempts","reconnectAttempts","initialTimeout","maxTimeout","alwaysReconnect","sendQueue","onOpenCallbacks","onMessageCallbacks","onErrorCallbacks","onCloseCallbacks","objectFreeze","_readyStateConstants","_connect","_setInternalState","prototype","CONNECTING","OPEN","CLOSING","CLOSED","RECONNECT_ABORTED","_reconnectableStatusCodes","safeDigest","autoApply","$$phase","$digest","bindToScope","self","$on","force","socket","readyState","create","onmessage","angular","bind","_onMessageHandler","onopen","_onOpenHandler","onerror","_onErrorHandler","onclose","_onCloseHandler","fireQueue","length","data","shift","send","isString","message","JSON","stringify","deferred","resolve","notifyOpenCallbacks","event","i","call","notifyCloseCallbacks","notifyErrorCallbacks","onOpen","cb","push","onClose","onError","onMessage","callback","isFunction","Error","isDefined","filter","RegExp","fn","pattern","indexOf","code","reconnect","applyAsyncOrDigest","args","arraySlice","arguments","$applyAsync","apply","currentCallback","exec","close","bufferedAmount","cancelableify","promise","cancel","then","newPromise","reason","splice","reject","defer","_getBackoffDelay","attempt","R","Math","random","T","F","N","M","floor","min","pow","state","objectDefineProperty","_internalConnectionState","forEach","pending","get","set","$WebSocketBackendProvider","$window","$log","Socket","ws","match","exports","require","Client","client","e","WebSocket","MozWebSocket","createWebSocketBackend","warn","noop","Object","freeze","defineProperty","Array","slice","elt","len","from","Number","ceil","module","factory","service","define"],"mappings":"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"}