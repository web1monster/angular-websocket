{"version":3,"sources":["src/angular-websocket.js"],"names":["$WebSocketProvider","$rootScope","$q","$timeout","$webSocketBackend","safeDigest","autoApply","$$phase","$apply","$WebSocket","url","this","_reconnectAttempts","initialTimeout","maxTimeout","sendQueue","onOpenCallbacks","onMessageCallbacks","onErrorCallbacks","onCloseCallbacks","objectFreeze","_readyStateConstants","_connect","prototype","CONNECTING","OPEN","CLOSING","CLOSED","RECONNECT_ABORTED","_reconnectableStatusCodes","close","force","socket","bufferedAmount","readyState","createWebSocketBackend","onopen","_onOpenHandler","bind","onmessage","_onMessageHandler","onerror","_onErrorHandler","onclose","_onCloseHandler","fireQueue","length","data","shift","send","isString","message","JSON","stringify","deferred","resolve","notifyOpenCallbacks","i","call","notifyCloseCallbacks","notifyErrorCallbacks","event","onMessage","callback","options","isFunction","Error","isDefined","filter","RegExp","push","fn","pattern","undefined","currentCallback","exec","onClose","cb","onOpen","onError","indexOf","code","reconnect","cancelableify","promise","cancel","then","newPromise","apply","arguments","reason","splice","reject","defer","angular","_getBackoffDelay","attempt","R","Math","random","T","F","N","M","floor","min","pow","_setInternalState","state","_internalConnectionState","forEach","pending","objectDefineProperty","get","set","$WebSocketBackend","$window","match","WebSocket","noop","Object","freeze","defineProperty","$inject","module","factory","service"],"mappings":"CAAC,WAUC,QAASA,GAAmBC,EAAYC,EAAIC,EAAUC,GAEpD,QAASC,GAAWC,GACdA,IAAcL,EAAWM,SAC3BN,EAAWO,SAIf,QAASC,GAAWC,GAClBC,KAAKD,IAAMA,EACXC,KAAKC,mBAAqB,EAC1BD,KAAKE,eAAiB,IACtBF,KAAKG,WAAa,IAClBH,KAAKI,aACLJ,KAAKK,mBACLL,KAAKM,sBACLN,KAAKO,oBACLP,KAAKQ,oBACLC,EAAaT,KAAKU,sBAElBV,KAAKW,WA6MP,MA1MAb,GAAWc,UAAUF,sBACnBG,WAAc,EACdC,KAAQ,EACRC,QAAW,EACXC,OAAU,EACVC,kBAAqB,GAGvBnB,EAAWc,UAAUM,2BACnB,KAGFpB,EAAWc,UAAUO,MAAQ,SAAUC,IACjCA,IAAUpB,KAAKqB,OAAOC,iBACxBtB,KAAKqB,OAAOF,SAIhBrB,EAAWc,UAAUD,SAAW,SAAUS,IACpCA,IAAUpB,KAAKqB,QAAqC,IAA3BrB,KAAKqB,OAAOE,cACvCvB,KAAKqB,OAAS5B,EAAkB+B,uBAAuBxB,KAAKD,KAC5DC,KAAKqB,OAAOI,OAASzB,KAAK0B,eAAeC,KAAK3B,MAC9CA,KAAKqB,OAAOO,UAAY5B,KAAK6B,kBAAkBF,KAAK3B,MACpDA,KAAKqB,OAAOS,QAAU9B,KAAK+B,gBAAgBJ,KAAK3B,MAChDA,KAAKqB,OAAOW,QAAUhC,KAAKiC,gBAAgBN,KAAK3B,QAIpDF,EAAWc,UAAUsB,UAAY,WAC/B,KAAOlC,KAAKI,UAAU+B,QAAqC,IAA3BnC,KAAKqB,OAAOE,YAAkB,CAC5D,GAAIa,GAAOpC,KAAKI,UAAUiC,OAE1BrC,MAAKqB,OAAOiB,KACVC,EAASH,EAAKI,SAAWJ,EAAKI,QAAUC,KAAKC,UAAUN,EAAKI,UAE9DJ,EAAKO,SAASC,YAIlB9C,EAAWc,UAAUiC,oBAAsB,WACzC,IAAK,GAAIC,GAAI,EAAGA,EAAI9C,KAAKK,gBAAgB8B,OAAQW,IAC/C9C,KAAKK,gBAAgByC,GAAGC,KAAK/C,OAIjCF,EAAWc,UAAUoC,qBAAuB,WAC1C,IAAK,GAAIF,GAAI,EAAGA,EAAI9C,KAAKQ,iBAAiB2B,OAAQW,IAChD9C,KAAKQ,iBAAiBsC,GAAGC,KAAK/C,OAGlCF,EAAWc,UAAUqC,qBAAuB,SAAUC,GACpD,IAAK,GAAIJ,GAAI,EAAGA,EAAI9C,KAAKO,iBAAiB4B,OAAQW,IAChD9C,KAAKO,iBAAiBuC,GAAGC,KAAK/C,KAAMkD,IAIxCpD,EAAWc,UAAUuC,UAAY,SAAUC,EAAUC,GACnD,IAAKC,EAAWF,GACd,KAAM,IAAIG,OAAM,8BAGlB,IAAIF,GAAWG,EAAUH,EAAQI,UAAYlB,EAASc,EAAQI,WAAaJ,EAAQI,iBAAkBC,SACnG,KAAM,IAAIH,OAAM,iDAGlBvD,MAAKM,mBAAmBqD,MACtBC,GAAIR,EACJS,QAASR,EAASA,EAAQI,OAASK,OACnCnE,UAAW0D,EAASA,EAAQ1D,WAAY,KAI5CG,EAAWc,UAAUiB,kBAAoB,SAAUW,GAIjD,IAAK,GAHDqB,GAEAE,EADA1C,EAASrB,KAEJ8C,EAAI,EAAGA,EAAIzB,EAAOf,mBAAmB6B,OAAQW,IACpDiB,EAAkB1C,EAAOf,mBAAmBwC,GAC5Ce,EAAUE,EAAgBF,QACtBA,EACEtB,EAASsB,IAAYrB,EAAQJ,OAASyB,GACxCE,EAAgBH,GAAGb,KAAK/C,KAAMwC,GAC9B9C,EAAWqE,EAAgBpE,YAEpBkE,YAAmBH,SAAUG,EAAQG,KAAKxB,EAAQJ,QACzD2B,EAAgBH,GAAGb,KAAK/C,KAAMwC,GAC9B9C,EAAWqE,EAAgBpE,aAI7BoE,EAAgBH,GAAGb,KAAK/C,KAAMwC,GAC9B9C,EAAWqE,EAAgBpE,aAKjCG,EAAWc,UAAUqD,QAAU,SAAUC,GACvClE,KAAKQ,iBAAiBmD,KAAKO,IAG7BpE,EAAWc,UAAUuD,OAAS,SAAUD,GACtClE,KAAKK,gBAAgBsD,KAAKO,IAG5BpE,EAAWc,UAAUc,eAAiB,WACpC1B,KAAKC,mBAAqB,EAC1BD,KAAK6C,sBACL7C,KAAKkC,aAGPpC,EAAWc,UAAUwD,QAAU,SAAUF,GACvClE,KAAKO,iBAAiBoD,KAAKO,IAG7BpE,EAAWc,UAAUmB,gBAAkB,SAAUmB,GAC/ClD,KAAKiD,qBAAqBC,IAG5BpD,EAAWc,UAAUqB,gBAAkB,SAAUiB,GAC/ClD,KAAKgD,uBACDhD,KAAKkB,0BAA0BmD,QAAQnB,EAAMoB,MAAQ,IACvDtE,KAAKuE,aAITzE,EAAWc,UAAU0B,KAAO,SAAUF,GAiBpC,QAASoC,GAAcC,GACrBA,EAAQC,OAASA,CACjB,IAAIC,GAAOF,EAAQE,IAKnB,OAJAF,GAAQE,KAAO,WACb,GAAIC,GAAaD,EAAKE,MAAM7E,KAAM8E,UAClC,OAAON,GAAcI,IAEhBH,EAGT,QAASC,GAAOK,GAGd,MAFA1D,GAAOjB,UAAU4E,OAAO3D,EAAOjB,UAAUiE,QAAQjC,GAAO,GACxDO,EAASsC,OAAOF,GACT/E,KA7BT,GAAI2C,GAAWpD,EAAG2F,QACd7D,EAASrB,KACTyE,EAAUD,EAAc7B,EAAS8B,QA8BrC,OA5BIpD,GAAOE,aAAeF,EAAOX,qBAAqBO,kBACpD0B,EAASsC,OAAO,sCAGhBjF,KAAKI,UAAUuD,MACbnB,QAASJ,EACTO,SAAUA,IAEZ3C,KAAKkC,aAoBAuC,GAGT3E,EAAWc,UAAU2D,UAAY,WAC/BvE,KAAKmB,QACL3B,EAAS2F,QAAQxD,KAAK3B,KAAM,WAC1BA,KAAKW,aACHX,KAAKoF,mBAAmBpF,KAAKC,qBAAqB,IAKxDH,EAAWc,UAAUwE,iBAAmB,SAASC,GAC/C,GAAIC,GAAIC,KAAKC,SAAW,EACpBC,EAAIzF,KAAKE,eACTwF,EAAI,EACJC,EAAIN,EACJO,EAAI5F,KAAKG,UAEb,OAAOoF,MAAKM,MAAMN,KAAKO,IAAIR,EAAIG,EAAIF,KAAKQ,IAAIL,EAAGC,GAAIC,KAGrD9F,EAAWc,UAAUoF,kBAAoB,SAASC,GAChD,GAAIV,KAAKM,MAAMI,KAAWA,GAAiB,EAARA,GAAaA,EAAQ,EACtD,KAAM,IAAI1C,OAAM,kDAAoD0C,EAGtEjG,MAAKkG,yBAA2BD,EAEhCd,QAAQgB,QAAQnG,KAAKI,UAAW,SAASgG,GACvCA,EAAQzD,SAASsC,OAAO,wDAIxBoB,GACFA,EAAqBvG,EAAWc,UAAW,cACzC0F,IAAK,WACH,MAAOtG,MAAKkG,0BAA4BlG,KAAKqB,OAAOE,YAEtDgF,IAAK,WACH,KAAM,IAAIhD,OAAM,2CAIf,SAASxD,GACd,MAAO,IAAID,GAAWC,IAK1B,QAASyG,GAAkBC,GAC3BzG,KAAKwB,uBAAyB,SAAUzB,GACpC,GAAI2G,GAAQ,YAAY1C,KAAKjE,EAE7B,KAAK2G,EACH,KAAM,IAAInD,OAAM,uBAGlB,OAAO,IAAIkD,GAAQE,UAAU5G,IAvPjC,GAAI6G,GAAO,aACPnG,EAAgBoG,OAAa,OAAIA,OAAOC,OAASF,EACjDP,EAAuBQ,OAAOE,eAC9BxE,EAAW4C,QAAQ5C,SACnBe,EAAa6B,QAAQ7B,WACrBE,EAAY2B,QAAQ3B,SAExBnE,GAAmB2H,SAAW,aAAc,KAAM,WAAY,qBAuO9DR,EAAkBQ,SAAW,WAa7B7B,QAAQ8B,OAAO,kBACdC,QAAQ,aAAc7H,GACtB6H,QAAQ,YAAc7H,GACtB8H,QAAQ,oBAAqBX,GAC7BW,QAAQ,mBAAoBX,GAG7BrB,QAAQ8B,OAAO,qBAAsB"}